---
title: 元素枚举判断思考
date: 2019-09-10 20:28:24
tags:
- java
categories:
- java
copyright: true #版权声明开启        
---
开发中会遇到,判断某个值是否在枚举中,通常情况下可以这么做:
```
@Getter
@AllArgsConstructor
public enum OrderStatusEnum {
    STATUS_1(1, "初始化"),
    STATUS_2(2, "状态2"),
    STATUS_3(4, "状态3"),
    STATUS_4(8, "状态4"),
    STATUS_5(16, "状态5"),
    STATUS_6(32, "状态6"),
    STATUS_7(64, "状态7"),
    STATUS_8(128, "状态8");
    
    private int status;

    private String desc;

    // 循环
    public static boolean isOrderStatus(int status) {
        for (OrderStatusEnum c : values()) {
            if (c.status.equals(status)) {
                return Boolean.TRUE;
            }
        }
        return Boolean.FALSE;
    }

    public static void main(String[] args) {
        System.out.println(OrderStatusEnum.isOrderStatus(32));
    }
}
```
有没有其他方法呢,可以使用java8特性处理:
```
@Getter
@AllArgsConstructor
public enum OrderStatusEnum {
    STATUS_1(1, "初始化"),
    STATUS_2(2, "状态2"),
    STATUS_3(4, "状态3"),
    STATUS_4(8, "状态4"),
    STATUS_5(16, "状态5"),
    STATUS_6(32, "状态6"),
    STATUS_7(64, "状态7"),
    STATUS_8(128, "状态8");
    
    private int status;

    private String desc;

    public static boolean isOrderStatus(int status) {
        return Arrays.asList(values()).stream().anyMatch(p -> {
            return p.getStatus() == status;
        });
    }

    public static void main(String[] args) {
        System.out.println(OrderStatusEnum.isOrderStatus(32));
    }
}
```
除了上面的两种方法,当然还有很多方法处理,下面使用运算符``>>``、``&``更优雅的处理:
```

@Getter
@AllArgsConstructor
public enum OrderStatusEnum {
    STATUS_1(0, 1, "初始化"),
    STATUS_2(1, 2, "状态2"),
    STATUS_22(1, 3, "状态22"),
    STATUS_3(2, 4, "状态3"),
    STATUS_4(3, 8, "状态4"),
    STATUS_5(4, 16, "状态5"),
    STATUS_6(5, 32, "状态6"),
    STATUS_7(6, 64, "状态7"),
    STATUS_8(7, 128, "状态8");

    private int offset;

    private int status;

    private String desc;

    // 使用时,需要知道与具体哪个枚举值比较
    public boolean isOrderStatus(int status) {
        return ((status >> (getStatus())) & 1) == 1;
    }
    
    public static void main(String[] args) {
        System.out.println(OrderStatusEnum.STATUS_3.isOrderStatus(4));
    }
}
```
由于java int数据类型占4个字节,一个字节占8位,对于第三种方法分析如下:
```
    /**
     * 1
     * 0000 0000 0000 0000 0000 0000 0000 0001
     * 1 >> 0 右移0位 --》 0000 0000 0000 0000 0000 0000 0000 0001
     * (1 >> 1) & 1 --》 (0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) --》0000 0000 0000 0000 0000 0000 0000 0001 结果为1
     *
     * 2
     * 0000 0000 0000 0000 0000 0000 0000 0010
     * 2 >> 1 右移1位 --》 0000 0000 0000 0000 0000 0000 0000 0001  高位由0补齐
     * (2 >> 1) & 1 --》 (0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 3
     * 0000 0000 0000 0000 0000 0000 0000 0011
     * 3 >> 1 右移1位 --》 0000 0000 0000 0000 0000 0000 0000 0001  高位由0补齐
     * (3 >> 1) & 1 --》 (0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 4
     * 0000 0000 0000 0000 0000 0000 0000 0100  高位由0补齐
     * 4 >> 2 右移2位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (4 >> 2) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 8
     * 0000 0000 0000 0000 0000 0000 0000 1000
     * 8 >> 3 右移3位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (8 >> 3) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 16
     * 0000 0000 0000 0000 0000 0000 0001 0000
     * 16 >> 4 右移4位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (16 >> 4) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 32
     * 0000 0000 0000 0000 0000 0000 0010 0000
     * 32 >> 5 右移5位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (32 >> 5) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 64
     * 0000 0000 0000 0000 0000 0000 0100 0000
     * 64 >> 6 右移6位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (64 >> 6) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     *
     * 128
     * 0000 0000 0000 0000 0000 0000 1000 0000
     * 128 >> 7 右移7位 --》0000 0000 0000 0000 0000 0000 0000 0001
     * (128 >> 7) & 1 --》(0000 0000 0000 0000 0000 0000 0000 0001) & (0000 0000 0000 0000 0000 0000 0000 0001) 结果为1
     */
```
上面很清晰了具体过程,java中位运算符有左移(<<)、右移(>>)、无符号右移(>>>)、位与(&)、位或(|)、位非(~)、位异或(^),介绍下``&``运算过程:
```
int a = 3
int b = 4
a & b
a转化成二进制: 0000 0000 0000 0000 0000 0000 0000 0011
b转化成二进制: 0000 0000 0000 0000 0000 0000 0000 0100
      结果值: 0000 0000 0000 0000 0000 0000 0000 0000
      所以 a & b = 0
```
