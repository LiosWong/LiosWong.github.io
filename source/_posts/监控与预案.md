---
title: 监控与预案
date: 2022-06-19 00:25:54
tags:
---

监控与预案是根据强弱依赖梳理而来。业务链路要覆盖全，可以结合具体的故障场景，监控的合理性、有效性（阈值、错误码、大盘）也很重要，减少误报、错报。

#### 强弱依赖

{% plantuml %}
@startmindmap
* 强弱依赖
** 定义
*** 强依赖：不可降级，阻断业务进行 
*** 弱依赖：可降级，不阻断业务进行
** 分析
*** 核心链路
**** 强依赖
**** 弱依赖
*** 非核心链路
**** 弱依赖
@endmindmap
{% endplantuml %}


#### 监控

{% plantuml %}
@startmindmap
* 监控
** 策略
*** 系统错误兜底监控
*** 大盘监控
*** 一级监控：链路监控（业务监控）
*** 二级监控：监控依赖
** 监控指标
*** 成功率
*** 总量
*** 失败量
*** 同比
**** 日同比
**** 周同比
*** rt
@endmindmap
{% endplantuml %}

系统监控不在上述业务监控范围内，系统监控指基础监控(cpu、内存、磁盘、load)、健康检查、jvm、消息、缓存等监控。


<!-- 示例
```
 下跌：
（总量）最近两分钟与昨天同比持续下跌超过30%预警
（总量）最近1分钟求和>300

 下跌：
 (总量) 最近2分钟求和与昨天同比下跌超过30%
（总量）最近1分钟求和>300

 同比上涨：
（总量）最近两分钟与昨天同比持续上涨超过30%预警
（总量）最近1分钟求和>500

成功率下跌1：
(总量) 最近1分钟求和>500
(成功率)最近1分钟求和<99%预防警
（失败量）当前时间的值>30

成功率下跌2：
(成功率)最近2分钟持续<99%预防警

RT上涨：
（耗时）最近10分钟与昨天同比持续上涨超过10%预警
（耗时）最近30分钟与上周同比持续上涨超过10%

总量同比上周：
（总量）最近2分钟与上周同比持续下跌超过30%
```
 -->

#### 预案



{% plantuml %}
@startmindmap
* 预案
** 覆盖度
** 有效性
*** 预案保鲜
*** 强弱依赖
*** 预案五要素
@endmindmap
{% endplantuml %}

<!-- ```
五要素：
1、执行时机
2、执行行动
3、执行影响
4、恢复时机
5、客服口径
``` -->

