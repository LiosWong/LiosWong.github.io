---
title: 转发与重定向
date: 2019-02-16 01:42:40
tags:
- 重定向 
- java
categories:
- java   
copyright: true #版权声明开启        
---
![https://note.youdao.com/yws/api/personal/file/WEB14fb30713392006f34c9cf828ec1e262?method=download&shareKey=1f513ac73dc70b3fb7b8e09467f6cb01](https://note.youdao.com/yws/api/personal/file/WEB14fb30713392006f34c9cf828ec1e262?method=download&shareKey=1f513ac73dc70b3fb7b8e09467f6cb01)
平常开发中时常用到重定向，正好借此总结一下，上面的图在开发中以及参考网上文章总结出来的(参考文章见文末)。
### 重定向
```
@RequestMapping(value = "/redirect",method = RequestMethod.GET)
@ResponseBody
public String redirect(HttpServletResponse response){
    try {
        response.sendRedirect("http://127.0.0.1:8080/api/redirect/test");
    } catch (IOException e) {
        e.printStackTrace();
    }
    return "redirect";
}
@RequestMapping(value = "/redirect/test",method = RequestMethod.GET)
@ResponseBody
public String redirectTest(HttpServletRequest request, HttpServletResponse response){
    return "redirect success";
}
```
项目启动成功后,在浏览器输入``http://127.0.0.1:8080/api/redirect``,在chrome检查Network栏目下，可以看到:
![https://note.youdao.com/yws/api/personal/file/WEB243a1a711e77999f1a4e92885d4cc180?method=download&shareKey=44f35b431fdf7057b8e43aa9effc3af3](https://note.youdao.com/yws/api/personal/file/WEB243a1a711e77999f1a4e92885d4cc180?method=download&shareKey=44f35b431fdf7057b8e43aa9effc3af3)
客户端发生了两次接口请求,第一次是``http://127.0.0.1:8080/api/redirect``,第二次是``http://127.0.0.1:8080/api/redirect/test``;且第一次接口请求的响应状态码为302(重定向),从其请求、响应头中可以清晰交互流程：
![https://note.youdao.com/yws/api/personal/file/WEB44f6b42a07762f378110c0beea29d9ad?method=download&shareKey=49a69ce218418fdf3daa423cf4ade336](https://note.youdao.com/yws/api/personal/file/WEB44f6b42a07762f378110c0beea29d9ad?method=download&shareKey=49a69ce218418fdf3daa423cf4ade336)
从上面分析，重定向时，进行了两次接口请求;过程简单理解为浏览器首先请求接口A,接口A进行了重定向到B,接口A给浏览器的响应状态码为302,并且返回了目的接口地址B，然后浏览器再次发起请求，请求接口地址B.
### 转发
```
@RequestMapping(value = "/forward",method = RequestMethod.GET)
@ResponseBody
public String forward(HttpServletRequest request, HttpServletResponse response){
    try {
        request.getRequestDispatcher("/api/forward/test").forward(request,response);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ServletException e) {
        e.printStackTrace();
    }
    return "index";
}
@RequestMapping(value = "/forward/test",method = RequestMethod.GET)
@ResponseBody
public String forwardTest(HttpServletRequest request, HttpServletResponse response){
    return "forward success";
}
```
在浏览器中访问``http://localhost:8080/api/forward``,会返回``forward success``,在chrome检查Network栏目下：
![https://note.youdao.com/yws/api/personal/file/WEB540a6c2c5faa49d3c420eb66ccdc250e?method=download&shareKey=f6b2cbff4c4bba0ea214e9a02f9df38b](https://note.youdao.com/yws/api/personal/file/WEB540a6c2c5faa49d3c420eb66ccdc250e?method=download&shareKey=f6b2cbff4c4bba0ea214e9a02f9df38b)
浏览器只请求了一次接口,请求地址没有发生变化;而且只能转发给当前的WEB应用资源。

### 总结
1. 重定向是客户端行为,转发是服务器行为
2. 转发只发生一次请求;且只能转发到当前应用资源;请求地址不会发生变化
3. 重定向发生两次请求;且能重定向到任何资源;地址栏会发生变化
4. 转发速度快于重定向

> 参考文章

1. [https://blog.csdn.net/daochuwenziyao/article/details/54233496](https://blog.csdn.net/daochuwenziyao/article/details/54233496)
2. [https://blog.csdn.net/webzhuce/article/details/54564608](https://blog.csdn.net/webzhuce/article/details/54564608)
